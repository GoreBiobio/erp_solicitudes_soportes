@extends('adminlte::layouts.app')@section('htmlheader_title')@section('contentheader_title', 'Solicitud Soporte')    {{ trans('adminlte_lang::message.home') }}@endsection@section('main-content')<script type="text/javascript">	function enviarSolicitud(indice){			var x = function callback(){			var soporte = $("#soporte"+indice).val();				if(soporte != ''){					$("#indice").val(indice);					$("#equipo").submit();          return;				}else{					makeGritter("Advertencia", "Debe ingresar un Motivo", "warning"); 				}			}			confirmar('Esta Seguro de enviar Solicitud Soporte?',x);  }  function alunarSolicitudServicio(indice){    var x = function callback(){        $('#equipo').attr('action', 'anularSolicitudServicio');        $("#id_anula_servicio").val(indice);        $("#equipo").submit();    }    confirmar('Esta Seguro de anular solicitud de servicio?',x);  }  function enviarSolicitudServicio(indiceServ){      var x = function callback(){      var servicio = $("#servicio"+indiceServ).val();      if(servicio != ''){        $("#indice").val(indiceServ);        $('#equipo').attr('action', 'recibeSolicitudServicio');        $("#equipo").submit();      }else{        $.notify("Debe Ingresar Motivo","warn");        }            }      confirmar('Esta Seguro de enviar Solicitud Servicio?',x);  }  function contrasenaSoporte(){  alert("llega");}</script><div class='notifications bottom-right'></div><form class="form-horizontal noenter" name="equipo" id="equipo" method="post" action="recibeSolicitud">{{ csrf_field() }}<input type="hidden" name="indice" id="indice"><input type="hidden" name="idFunc" value="{{$datosUsuario[0]->idFunc}}"><input type="hidden" name="id_anula" id="id_anula"><input type="hidden" name="id_anula_servicio" id="id_anula_servicio"><div class="row">	<div class="col-md-12">	<div class="box box-primary">            <div class="box-header with-border">              <h3 class="box-title">Antecedentes</h3>            </div>            <!-- /.box-header -->            <!-- form start -->            @foreach ($datosUsuario as $datosUsuario)            <div class="box-body">              <div class="row">                <div class="col-xs-12 col-lg-6">                    <div class="form-group">                      <label class="col-sm-3 col-xs-12 " style="color:#3c8dbc;">Rut</label>                       <label class="col-sm-9 col-xs-12">{{$datosUsuario->rutFunc}} </label>                    </div>                  </div>                  <div class="col-xs-12 col-lg-6">                    <div class="form-group">                      <label class="col-sm-3 col-xs-12 " style="color:#3c8dbc;">Nombre</label>                       <label class="col-sm-9 col-xs-12">{{$datosUsuario->nombresFunc}}  {{$datosUsuario->paternoFunc}} {{$datosUsuario->maternoFunc}}</label>                    </div>                  </div>                  <div class="clearfix "></div>                      <div class="col-xs-12 col-lg-6">              <div class="form-group">                <label class="col-sm-3 col-xs-12 " style="color:#3c8dbc;">Departamento</label>                 <label class="col-sm-9 col-xs-12">{{$datosUsuario->departamento}}</label>              </div>            </div>            <div class="col-xs-12 col-lg-6">              <div class="form-group">                <label class="col-sm-3 col-xs-12 " style="color:#3c8dbc;">Division</label>                 <label class="col-sm-9 col-xs-12">{{$datosUsuario->division}}</label>              </div>            </div>            <div class="clearfix "></div>              </div>              </div>            @endforeach          </div>		</div>          <div class="col-md-6">              <!-- DIRECT CHAT -->              <div class="box box-warning direct-chat direct-chat-warning">                <div class="box-header with-border">                  <h3 class="box-title">Hardware</h3>                  <div class="box-tools pull-right">                                  <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>                    </button>                  </div>                </div>                <!-- /.box-header -->              <div class="box-body" style="">              <div class="box-body table-responsive no-padding">              <table class="table table-bordered table-striped">                <thead>                <tr>                  <th>ID</th>                  <th>Tipo</th>                  <th>Marca</th>                  <th>Modelo</th>                  <th>Acciones</th>                </tr>	                </thead>                <tbody>                	@foreach ($datosHard as $indexKey => $datosHard)                	<tr>                		<td>{{$datosHard->idHard}} <input type="hidden" name="idHard{{$indexKey}}" value="{{$datosHard->idHard}}"></td>                		<td>{{$datosHard->compModelo}}</td>                		<td>{{$datosHard->marca}}</td>                		<td>{{$datosHard->modelo}}</td>                		<td><button type="button" class="btn btn-primary btn-md" data-toggle="modal" data-target="#myModal{{$datosHard->idHard}}">						  Solicitar Soporte						</button></td>	                	</tr>	<!-- Modal -->				<div class="modal fade" id="myModal{{$datosHard->idHard}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabelmyModal{{$datosHard->idHard}}">				  <div class="modal-dialog" role="document">				    <div class="modal-content">				      <div class="modal-header">				        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>				        <h4 class="modal-title" id="myModalLabel">Solicitud Para {{$datosHard->modelo}}</h4>				      </div>				      <div class="modal-body">	              <div class="box-body">	              	<div class="form-group">	                  <label for="inputPassword3" class="col-sm-2 control-label">Criticidad</label>	                  <div class="col-sm-10">	                   	<select class="form-control" name="criticidad{{$indexKey}}">		                    <option value="1">Baja</option>		                    <option value="2">Media</option>		                    <option value="3">Alta</option>		                  </select> 		                  </div>	                </div>	 	                <div class="form-group">	                  <label for="inputEmail3" class="col-sm-2 control-label">Solicitudd</label>	                  <div class="col-sm-10">	                    <textarea class="form-control" id="soporte{{$indexKey}}" name="soporte{{$indexKey}}"></textarea>	                  </div>	              </div>						 					</div>				      <div class="modal-footer">				        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>				        <button type="button" onclick="enviarSolicitud({{$indexKey}})" class="btn btn-primary">Enviar</button>				      </div>				    </div>				  </div>				</div>        </div>	        @endforeach        </tbody>        </table>            </div>                          </div>                <!-- /.box-body -->                <!-- /.box-footer-->              </div>              <!--/.direct-chat -->            </div>           <div class="col-md-6">              <!-- DIRECT CHAT -->              <div class="box box-warning direct-chat direct-chat-warning">                <div class="box-header with-border">                  <h3 class="box-title">Servicios</h3>                  <div class="box-tools pull-right">                                  <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>                    </button>                  </div>                </div>                <!-- /.box-header -->                <div class="box-body" style="">                              <div class="box-body table-responsive no-padding">              <table class="table table-hover">                <thead>                <tr>                  <th>Tipo</th>                  <th>Accion</th>                </tr>	                </thead>                <tbody>                @foreach ($tiposServicios as $indexKeySer => $tiposServicios)                 	<tr>                		<td>                      {{$tiposServicios->servicio}}                      <input type="hidden" name="idserv{{$indexKeySer}}" value="{{$tiposServicios->idServ}}">                    </td>                		<td><!--<button type="button" class="btn btn-primary btn-md" data-toggle="modal" data-target="#modalServ{{$tiposServicios->idServ}}">                    Solicitar Servicio-->                    </button>                    <button type="button" class="btn btn-primary btn-md" data-toggle="modal" onclick="cargar_datos_modal('Solicitar Servicio','id_func|id_serv','{{$id_usuario}}|{{$tiposServicios->idServ}}','solicitaServicio');">                    Solicitar Servicio                    </button>                  </td>	                	</tr>          <div class="modal fade" id="modalServ{{$tiposServicios->idServ}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabelmyModal{{$tiposServicios->idServ}}">          <div class="modal-dialog" role="document">            <div class="modal-content">              <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>                <h4 class="modal-title" id="myModalLabel">Solicitud Servicio: {{$tiposServicios->servicio}}</h4>              </div>              <div class="modal-body">                <div class="box-body">                  <div class="form-group">                    <label for="inputPassword3" class="col-sm-2 control-label">Criticidad</label>                    <div class="col-sm-10">                      <select class="form-control" name="criticidadServ{{$indexKeySer}}">                        <option value="1">Baja</option>                        <option value="2">Media</option>                        <option value="3">Alta</option>                      </select>                       </div>                  </div>                     <div class="form-group">                    <label for="inputEmail3" class="col-sm-2 control-label">Solicitud</label>                    <div class="col-sm-10">                      <textarea class="form-control" id="servicio{{$indexKeySer}}" name="servicio{{$indexKeySer}}"></textarea>                    </div>                </div>                      </div>              <div class="modal-footer">                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>                <button type="button" onclick="enviarSolicitudServicio({{$indexKeySer}})" class="btn btn-primary">Enviar</button>              </div>            </div>          </div>        </div>        </div>                      @endforeach               </tbody>          </table>            </div>                                  </div>                <!-- /.box-body -->                            <!-- /.box-footer-->              </div>              <!--/.direct-chat -->            </div>                  </div><h2 class="page-header">Solicitudes</h2><!--desde aqui-->  <div class="nav-tabs-custom">            <ul class="nav nav-tabs">              <li class="active"><a href="#tab_1" data-toggle="tab" aria-expanded="true">Pedidos Soporte</a></li>              <li class=""><a href="#tab_2" data-toggle="tab" aria-expanded="false">Pedidos Servicios</a></li>            </ul>            <div class="tab-content">              <div class="tab-pane active" id="tab_1">              <div class="box-header with-border">              <h3 class="box-title">Pedidos Soporte</h3>            </div>            <!-- /.box-header -->            @if (isset($datosSolicitudes))            <div class="box-body">              <div class="table-responsive">                <table class="table no-margin tabladinamica" id="tablaSoportes">                  <thead>                  <tr>                    <th>Ticket</th>                    <th>Fecha Solicitud</th>                    <th>Hora Solicitud</th>                    <th>Tipo</th>                    <th>Marca</th>                    <th>Modelo</th>                    <th>ver solicitud</th>                    <th>Estado</th>                    <th style="text-align: center;">Acciones</th>                  </tr>                  </thead>                  <tbody>                  @foreach ($datosSolicitudes as $indexKey => $datosSolicitudes)                  @if ($datosSolicitudes->estadoSop != 3)                  <tr>                    <td>{{$datosSolicitudes->idSolSop}}</td>                    <td>{{ date('d-m-Y', strtotime($datosSolicitudes->fecCreaSop)) }}</td>                    <td>{{ date('H:i', strtotime($datosSolicitudes->fecCreaSop)) }}</td>                    <td>{{$datosSolicitudes->tipoHard}}</td>                    <td>{{$datosSolicitudes->marca}}</td>                    <td>{{$datosSolicitudes->modelo}}</td>                    <td>                          <span type="button" class="btn btn-primary btn-md" data-toggle="modal" data-target="#myModalsop{{$indexKey}}">                       <i class="blue ace icon fa fa-expand"></i>                      </span>                                         </td>                   <td>                    @if (($datosSolicitudes->estadoSop == 1) && ($datosSolicitudes->funcRespoSop == null) )                      enviado                    @elseif (isset($datosSolicitudes->funcRespoSop) && ($datosSolicitudes->estadoSop == 1))                      Asignado a profesional informatica                    @elseif ($datosSolicitudes->estadoSop == 'Cerrado')                      Pendiente Evaluación                    @elseif ($datosSolicitudes->estadoSop == 'Evaluado')                      Cerrado                       @endif                    </td>                    <td style="text-align: center;">                      @if(($datosSolicitudes->estadoSop == 1) && ($datosSolicitudes->funcRespoSop == null) )                      <a type="button" class="btn btn-warning" alt="anular" rel="{{$datosSolicitudes->idSolSop}}">Anular</a>                      @endif                      @if($datosSolicitudes->estadoSop == 'Cerrado')                      <a type="button" class="btn btn-success" alt="recepcionar" rel="{{$datosSolicitudes->idSolSop}}" onclick="cargar_datos_modal('Recepcionar Solicitud','id_solicitud|id_funcionario','{{$datosSolicitudes->idSolSop}}|{{$datosSolicitudes->idFunc}}','recepcionarSolicitud')">Recepcionar</a>                      @endif                    </td>                  </tr>                  <div class="modal fade" id="myModalsop{{$indexKey}}" tabindex="-1" role="dialog" aria-labelledby="myModalsop{{$indexKey}}" aria-hidden="true">                        <div class="modal-dialog modal-dialog-centered" role="document">                          <div class="modal-content">                            <div class="modal-header">                              <h4 class="modal-title" id="exampleModalLongTitle">Motivo Solicitud para {{$datosSolicitudes->marca}} {{$datosSolicitudes->modelo}}</h4>                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">                                <span aria-hidden="true">&times;</span>                              </button>                            </div>                            <div class="modal-body">                              <div class="form-group">                              <div class="col-sm-12">                              <label class="col-sm-2 col-xs-12 " style="color:#3c8dbc;">Solicitud</label>                               <label class="col-sm-10 col-xs-12">                              <p>{{$datosSolicitudes->solicitudSop}}</p>                              </label>                              </div>                               <div class="col-sm-12">                              <label class="col-sm-2 col-xs-12 " style="color:#3c8dbc;">Criticidad</label>                               <label class="col-sm-10 col-xs-12">                              @if($datosSolicitudes->estadoCritSop == 1)                              baja                              @elseif($datosSolicitudes->estadoCritSop == 2)                              media                              @elseif($datosSolicitudes->estadoCritSop == 3)                              alta                              @endif                              </label>                              </div>                               </div>                            </div>                            <div class="modal-footer">                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>                            </div>                          </div>                        </div>                      </div>                   @endif                  @endforeach                   </tbody>                </table>              </div>              <!-- /.table-responsive -->            </div>           @endif              </div>              <!-- /.tab-pane -->              <div class="tab-pane" id="tab_2">                <div class="box-header with-border">              <h3 class="box-title">Pedidos Servicios</h3>            </div>            @if (isset($pedidoServicios))                <div class="box-body">                  <table class="table no-margin tabladinamica" id="tablaSoportes">                  <thead>                  <tr>                    <th>Ticket</th>                    <th>Fecha Solicitud</th>                    <th>Hora Solicitud</th>                    <th>Sevicio</th>                    <th>ver solicitud</th>                    <th>Estado</th>                    <th>Acciones</th>                  </tr>                  </thead>                  <tbody>                  @foreach ($pedidoServicios as $indexSoliSoporte => $pedidoServicios)                  @if ($pedidoServicios->estadoSolServ != 3)                  <tr>                    <td>{{$pedidoServicios->idSolServ}}</td>                    <td>{{ date('d-m-Y', strtotime($pedidoServicios->fecCreaSolServ)) }}</td>                    <td>{{ date('H:i', strtotime($pedidoServicios->fecCreaSolServ)) }}</td>                    <td>{{$pedidoServicios->servicio}}</td>                    <td>                    <span type="button" class="btn btn-primary btn-md" data-toggle="modal" data-target="#myModalserv{{$indexSoliSoporte}}">                       <i class="blue ace icon fa fa-expand"></i>                      </span>                    </td>                    <td>                    @if ($pedidoServicios->estadoSolServ  == 1)                      enviado                    @elseif ($pedidoServicios->estadoSolServ  == 2)                       Asignado a profesional informatica                    @endif</td>                    <td>                      <a type="button" class="btn btn-warning" alt="" onclick="alunarSolicitudServicio({{$pedidoServicios->idSolServ}})" >Anular</a>                    </td>                  </tr>          <div class="modal fade" id="myModalserv{{$indexSoliSoporte}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabelmyModal{{$tiposServicios->idServ}}">          <div class="modal-dialog" role="document">            <div class="modal-content">              <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>                <h4 class="modal-title" id="myModalLabel">Solicitud Servicio Para {{$tiposServicios->servicio}}</h4>                </div>                    <div class="modal-body">                      <div class="box-body">                        <div class="form-group">                            <div class="col-sm-12">                            <label class="col-sm-2 col-xs-12 " style="color:#3c8dbc;">Solicitud</label>                             <label class="col-sm-10 col-xs-12">                            <p>{{$pedidoServicios->solicitudServ}}</p>                            </label>                            </div>                             <div class="col-sm-12">                            <label class="col-sm-2 col-xs-12 " style="color:#3c8dbc;">Criticidad</label>                             <label class="col-sm-10 col-xs-12">                            @if($pedidoServicios->estadoCritSolServ == 1)                            baja                            @elseif($pedidoServicios->estadoCritSolServ == 2)                            media                            @elseif($pedidoServicios->estadoCritSolServ == 3)                            alta                            @endif                            </label>                            </div>                           </div>                    </div>                    <div class="modal-footer">                      <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>                      <!--<button type="button" onclick="modificarSolicitudServicio({{$indexKeySer}})" class="btn btn-primary">Modificar</button>-->                    </div>                  </div>                      </div>                    </div>                    </div>                   @endif                    @endforeach                  </tbody>                </table>                </div>               @endif                 </div>            </div>            <!-- /.tab-content -->          </div><!--haste aqui--></form>	  <div class="modal in printable" id="modal" >      <div class="modal-dialog modal-lg">        <div class="modal-content">          <div class="modal-header">            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>            <h4 class="modal-title" id="modal-title"></h4>          </div>          <div class="modal-body" id = "modal-body">          </div>          <div class="modal-footer">                    </div>        </div><!-- /.modal-content -->      </div><!-- /.modal-dialog -->    </div><!-- /.modal -->  @endsection